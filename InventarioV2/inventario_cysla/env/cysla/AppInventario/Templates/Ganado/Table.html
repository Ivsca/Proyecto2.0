{% load static %}
<title>Gestor de Ganado</title>
<!-- Inclusión de archivos CSS -->
<link rel="stylesheet" href="{% static 'Css/bootstrap.min.css' %}">
<link rel="stylesheet" href="{% static 'Css/Ganado/Ganado.css' %}">
<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<!-- SweetAlert2 CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">



{% include 'inc/Header.html' %}
<div class="container mt-5">
    <!-- Título principal -->
    <h2 class="text-center mb-4">Gestión de Ganado</h2>
    
    <!-- BUSCADOR MEJORADO -->
    <div class="search-container">
        <form class="search-form" action="" method="post">
            {% csrf_token %}
            <select class="search-select" name="TipoBusqueda" id="TipoBusqueda">
                <option value="">Buscar en todo</option>
                <option value="codigo">Código</option>
                <option value="raza">Raza</option>
                <option value="estado">Estado</option>
                <option value="peso">Peso</option>
            </select>
            
            <input type="text" class="search-input" name="valor" 
                   placeholder="¿Qué animal buscas hoy?" required>
            
            <button type="submit" class="search-btn">
                <i class="fas fa-search"></i> Buscar
            </button>
        </form>
    </div>

    <!-- Contenedor de las tarjetas de ganado -->
    <div class="row justify-content-center">
        {% for vacuno in ganado %}
        <!-- Tarjeta individual para cada animal -->
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card ganado-card h-100">
                <span class="ganado-code">{{ vacuno.codigocria|default:"G-001" }}</span>
                
                <img src="{% static 'Image/img/fondo_vaca.jpg' %}" class="card-img-top" alt="{{ vacuno.nombre }}">
                
                <div class="button-container text-center">
                    <h5 class="card-title">{{ vacuno.codigocria|default:"G-001" }}</h5>
                    <p class="mb-1"><strong>Raza:</strong> {{ vacuno.razas|default:"Angus" }}</p>
                    <p class="mb-1"><strong>Edad:</strong> {{ vacuno.edad|default:"3" }} años</p>
                    <p class="mb-1"><strong>Estado:</strong> {{ vacuno.estado|default:"Saludable" }}</p>
                    <p class="mb-1"><strong>Padre:</strong> {{ vacuno.codigopapa|default:"N/A" }}</p>
                    <p class="mb-1"><strong>Madre:</strong> {{ vacuno.codigomama|default:"N/A" }}</p>
                    <p class="mb-3"><strong>Crias:</strong> {{ vacuno.crias|default:"0" }}</p>
                    
                    <div class="d-flex justify-content-center gap-2">
                        <button class="btn btn-primary" onclick="abrirFormularioVer('{{ vacuno.codigocria }}')">
                            <i class="fas fa-eye"></i> Ver
                        </button>
                        <button class="btn btn-warning" onclick="mostrarFormularioEditar('{{ vacuno.codigocria }}')">
                            <i class="fas fa-edit"></i> Editar
                        </button>
                        <button class="btn btn-danger" onclick="EliminarVacuno('{{ vacuno.id }}')">
                            <i class="fas fa-trash-alt"></i> Eliminar
                        </button>
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12 text-center">
            <div class="alert alert-info">
                No se encontraron animales registrados.
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Inclusión de scripts -->
<script src="{% static 'JavaScripts/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'JavaScripts/Ganado/Alertas.js' %}"></script>
<!-- SweetAlert2 JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
{% include 'inc/Footer.html' %}